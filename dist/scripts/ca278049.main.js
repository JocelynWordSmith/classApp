"use strict";var Post=Parse.Object.extend({className:"Post"}),PostCollection=Parse.Collection.extend({model:Post}),LoginView=Parse.View.extend({events:{"click .submit-signup":"signup","click .submit-login":"login"},template:_.template($(".login-view").text()),initialize:function(){$(".input-container").append(this.el),this.render()},render:function(){var a=this.template;this.$el.html(a)},signup:function(){var a=$(".user-signup").val(),b=$(".password-signup").val(),c=$(".email-signup").val(),d=new Parse.User;d.set("username",a),d.set("password",b),d.set("email",c),d.signUp(null,{success:function(){window.location="/#app"},error:function(a,b){alert("Error: "+b.code+" "+b.message)}})},login:function(){var a=$(".user-login").val(),b=$(".password-login").val();Parse.User.logIn(a,b,{success:function(a){window.location="/#app",console.log(a+"logged in")},error:function(){}})}}),UploadView=Parse.View.extend({events:{"click .upload-file":"upload","click .logout":"logout"},template:_.template($(".upload-view").text()),initialize:function(){$(".input-container").html(this.el),this.render()},render:function(){var a=this.template;this.$el.html(a)},upload:function(){var a=$(".input-file")[0];if(a.files.length>0){var b=a.files[0],c="photo.jpg",d=new Parse.File(c,b);d.save().done(function(){console.log("it worked!")}).fail(function(){console.log("oops... it failed.")});var e=new Parse.Object("Post");e.set("caption",$(".caption").val()),e.set("user",Parse.User.current().attributes.username),e.set("imageFile",d);var f=new Parse.ACL(Parse.User.current());f.setPublicReadAccess(!0),e.setACL(f),e.save().done(function(){new PostView({model:e})})}},logout:function(){Parse.User.logOut(),window.location="/"}}),PostView=Parse.View.extend({className:"post-bound",events:{"click .delete":"delete","click .set-private":"makePrivate"},template:_.template($(".post-view").text()),initialize:function(){$(".active-container").prepend(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},"delete":function(){this.model.destroy(),this.remove()},makePrivate:function(){this.model.setACL(new Parse.ACL(Parse.User.current())),this.model.save()}}),loginView,uploadView,postView,AppRouter=Backbone.Router.extend({routes:{"":"home",app:"app"},initialize:function(){},home:function(){uploadView&&uploadView.remove(),postView&&postView.remove(),loginView=new LoginView},app:function(){loginView&&loginView.remove(),uploadView=new UploadView;var a=new PostCollection;a.fetch({success:function(a){a.each(function(a){console.warn(a),postView=new PostView({model:a})})},error:function(){console.log("could not retrieve object")}})}});Parse.initialize("dt8DfJoVpPqTM004VdtOUEeXXqRdxBfc88fksbNN","gsPQIKflI4ErhhNa4Ad6HNzcyhEjoYjumZLJRKcE");var router=new AppRouter;Backbone.history.start();